var at=Object.defineProperty;var nt=(t,r,e)=>r in t?at(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e;var K=(t,r,e)=>nt(t,typeof r!="symbol"?r+"":r,e);import{b as Y,aC as O,d as q,g as J,h as B,az as ut,b2 as ct,b3 as ft,a5 as pt,b4 as dt,b5 as ht,b6 as bt,b7 as gt,K as _t,b8 as vt,b9 as wt,ba as yt,l as V,bb as St,bc as mt,B as At,bd as Bt,be as Lt,U as Pt,bf as Ut,bg as It,a4 as m,b0 as Tt}from"./DkWwPZ4s.js";import{_ as Ct}from"./Dm-U5KR8.js";function Et(t,r){var e=void 0,s;Y(()=>{e!==(e=r())&&(s&&(O(s),s=null),e&&(s=q(()=>{J(()=>e(t))})))})}function W(t){var r,e,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(r=0;r<i;r++)t[r]&&(e=W(t[r]))&&(s&&(s+=" "),s+=e)}else for(e in t)t[e]&&(s&&(s+=" "),s+=e);return s}function Mt(){for(var t,r,e=0,s="",i=arguments.length;e<i;e++)(t=arguments[e])&&(r=W(t))&&(s&&(s+=" "),s+=r);return s}function Rt(t){return typeof t=="object"?Mt(t):t??""}const j=[...` 	
\r\fÂ \v\uFEFF`];function zt(t,r,e){var s=t==null?"":""+t;if(r&&(s=s?s+" "+r:r),e){for(var i in e)if(e[i])s=s?s+" "+i:i;else if(s.length)for(var o=i.length,a=0;(a=s.indexOf(i,a))>=0;){var l=a+o;(a===0||j.includes(s[a-1]))&&(l===s.length||j.includes(s[l]))?s=(a===0?"":s.substring(0,a))+s.substring(l+1):a=l}}return s===""?null:s}function H(t,r=!1){var e=r?" !important;":";",s="";for(var i in t){var o=t[i];o!=null&&o!==""&&(s+=" "+i+": "+o+e)}return s}function z(t){return t[0]!=="-"||t[1]!=="-"?t.toLowerCase():t}function Nt(t,r){if(r){var e="",s,i;if(Array.isArray(r)?(s=r[0],i=r[1]):s=r,t){t=String(t).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var o=!1,a=0,l=!1,c=[];s&&c.push(...Object.keys(s).map(z)),i&&c.push(...Object.keys(i).map(z));var n=0,w=-1;const h=t.length;for(var d=0;d<h;d++){var p=t[d];if(l?p==="/"&&t[d-1]==="*"&&(l=!1):o?o===p&&(o=!1):p==="/"&&t[d+1]==="*"?l=!0:p==='"'||p==="'"?o=p:p==="("?a++:p===")"&&a--,!l&&o===!1&&a===0){if(p===":"&&w===-1)w=d;else if(p===";"||d===h-1){if(w!==-1){var L=z(t.substring(n,w).trim());if(!c.includes(L)){p!==";"&&d++;var S=t.substring(n,d).trim();e+=" "+S+";"}}n=d+1,w=-1}}}}return s&&(e+=H(s)),i&&(e+=H(i,!0)),e=e.trim(),e===""?null:e}return t==null?null:String(t)}function kt(t,r,e,s,i,o){var a=t.__className;if(B||a!==e||a===void 0){var l=zt(e,s,o);(!B||l!==t.getAttribute("class"))&&(l==null?t.removeAttribute("class"):r?t.className=l:t.setAttribute("class",l)),t.__className=e}else if(o&&i!==o)for(var c in o){var n=!!o[c];(i==null||n!==!!i[c])&&t.classList.toggle(c,n)}return o}function N(t,r={},e,s){for(var i in e){var o=e[i];r[i]!==o&&(e[i]==null?t.style.removeProperty(i):t.style.setProperty(i,o,s))}}function Ot(t,r,e,s){var i=t.__style;if(B||i!==r){var o=Nt(r,s);(!B||o!==t.getAttribute("style"))&&(o==null?t.removeAttribute("style"):t.style.cssText=o),t.__style=r}else s&&(Array.isArray(s)?(N(t,e==null?void 0:e[0],s[0]),N(t,e==null?void 0:e[1],s[1],"important")):N(t,e,s));return s}function D(t,r,e=!1){if(t.multiple){if(r==null)return;if(!ut(r))return ct();for(var s of t.options)s.selected=r.includes(Q(s));return}for(s of t.options){var i=Q(s);if(ft(i,r)){s.selected=!0;return}}(!e||r!==void 0)&&(t.selectedIndex=-1)}function Dt(t){var r=new MutationObserver(()=>{D(t,t.__value)});r.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),pt(()=>{r.disconnect()})}function Q(t){return"__value"in t?t.__value:t.value}const I=Symbol("class"),T=Symbol("style"),Z=Symbol("is custom element"),x=Symbol("is html");function ae(t){if(B){var r=!1,e=()=>{if(!r){if(r=!0,t.hasAttribute("value")){var s=t.value;M(t,"value",null),t.value=s}if(t.hasAttribute("checked")){var i=t.checked;M(t,"checked",null),t.checked=i}}};t.__on_r=e,wt(e),yt()}}function ne(t,r){var e=F(t);e.value===(e.value=r??void 0)||t.value===r&&(r!==0||t.nodeName!=="PROGRESS")||(t.value=r??"")}function Gt(t,r){r?t.hasAttribute("selected")||t.setAttribute("selected",""):t.removeAttribute("selected")}function M(t,r,e,s){var i=F(t);B&&(i[r]=t.getAttribute(r),r==="src"||r==="srcset"||r==="href"&&t.nodeName==="LINK")||i[r]!==(i[r]=e)&&(r==="loading"&&(t[Ut]=e),e==null?t.removeAttribute(r):typeof e!="string"&&tt(t).includes(r)?t[r]=e:t.setAttribute(r,e))}function Ft(t,r,e,s,i=!1){var o=F(t),a=o[Z],l=!o[x];let c=B&&a;c&&V(!1);var n=r||{},w=t.tagName==="OPTION";for(var d in r)d in e||(e[d]=null);e.class?e.class=Rt(e.class):e[I]&&(e.class=null),e[T]&&(e.style??(e.style=null));var p=tt(t);for(const u in e){let f=e[u];if(w&&u==="value"&&f==null){t.value=t.__value="",n[u]=f;continue}if(u==="class"){var L=t.namespaceURI==="http://www.w3.org/1999/xhtml";kt(t,L,f,s,r==null?void 0:r[I],e[I]),n[u]=f,n[I]=e[I];continue}if(u==="style"){Ot(t,f,r==null?void 0:r[T],e[T]),n[u]=f,n[T]=e[T];continue}var S=n[u];if(!(f===S&&!(f===void 0&&t.hasAttribute(u)))){n[u]=f;var h=u[0]+u[1];if(h!=="$$")if(h==="on"){const _={},P="$$"+u;let b=u.slice(2);var R=It(b);if(St(b)&&(b=b.slice(0,-7),_.capture=!0),!R&&S){if(f!=null)continue;t.removeEventListener(b,n[P],_),n[P]=null}if(f!=null)if(R)t[`__${b}`]=f,At([b]);else{let ot=function(lt){n[u].call(this,lt)};n[P]=mt(b,t,ot,_)}else R&&(t[`__${b}`]=void 0)}else if(u==="style")M(t,u,f);else if(u==="autofocus")Bt(t,!!f);else if(!a&&(u==="__value"||u==="value"&&f!=null))t.value=t.__value=f;else if(u==="selected"&&w)Gt(t,f);else{var g=u;l||(g=Lt(g));var $=g==="defaultValue"||g==="defaultChecked";if(f==null&&!a&&!$)if(o[u]=null,g==="value"||g==="checked"){let _=t;const P=r===void 0;if(g==="value"){let b=_.defaultValue;_.removeAttribute(g),_.defaultValue=b,_.value=_.__value=P?b:null}else{let b=_.defaultChecked;_.removeAttribute(g),_.defaultChecked=b,_.checked=P?b:!1}}else t.removeAttribute(u);else $||p.includes(g)&&(a||typeof f!="string")?(t[g]=f,g in o&&(o[g]=Pt)):typeof f!="function"&&M(t,g,f)}}}return c&&V(!0),n}function ue(t,r,e=[],s=[],i,o=!1){gt(e,s,a=>{var l=void 0,c={},n=t.nodeName==="SELECT",w=!1;if(Y(()=>{var p=r(...a.map(_t)),L=Ft(t,l,p,i,o);w&&n&&"value"in p&&D(t,p.value);for(let h of Object.getOwnPropertySymbols(c))p[h]||O(c[h]);for(let h of Object.getOwnPropertySymbols(p)){var S=p[h];h.description===vt&&(!l||S!==l[h])&&(c[h]&&O(c[h]),c[h]=q(()=>Et(t,()=>S))),L[h]=S}l=L}),n){var d=t;J(()=>{D(d,l.value,!0),Dt(d)})}w=!0})}function F(t){return t.__attributes??(t.__attributes={[Z]:t.nodeName.includes("-"),[x]:t.namespaceURI===dt})}var X=new Map;function tt(t){var r=X.get(t.nodeName);if(r)return r;X.set(t.nodeName,r=[]);for(var e,s=t,i=Element.prototype;i!==s;){e=bt(s);for(var o in e)e[o].set&&r.push(o);s=ht(s)}return r}const $t=()=>performance.now(),y={tick:t=>requestAnimationFrame(t),now:()=>$t(),tasks:new Set};function et(){const t=y.now();y.tasks.forEach(r=>{r.c(t)||(y.tasks.delete(r),r.f())}),y.tasks.size!==0&&y.tick(et)}function ce(t){let r;return y.tasks.size===0&&y.tick(et),{promise:new Promise(e=>{y.tasks.add(r={c:t,f:e})}),abort(){y.tasks.delete(r)}}}var Kt=Object.defineProperty,Vt=(t,r,e)=>r in t?Kt(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e,k=(t,r,e)=>(Vt(t,typeof r!="symbol"?r+"":r,e),e);class E{constructor(r,e={}){k(this,"src"),k(this,"options"),k(this,"howl"),this.src=r,this.options=e,this.create()}async create(){const{Howl:r}=await Ct(async()=>{const{Howl:o}=await import("./Cs9iHdjk.js");return{Howl:o}},[],import.meta.url).then(o=>o.h),{loop:e,volume:s}=this.options,i=new r({src:this.src,loop:e||!1,volume:s||1,...this.options});this.howl=i}update(r=this.options){this.unload(),this.options=r,this.create()}destroy(){this.stop(),this.unload()}play(){this.howl.play()}stop(){this.howl.stop()}unload(){this.howl.unload()}}const rt=""+new URL("../assets/250812_Drone 1_seamless.Bles6v51.mp3",import.meta.url).href,st=""+new URL("../assets/250812_Drone 2_seamless.DNgxXvGE.mp3",import.meta.url).href,it=""+new URL("../assets/Blip_UI_click.z3NQvCDz.mp3",import.meta.url).href,jt=""+new URL("../assets/Blip_hi_00001.CzfUbRJ6.mp3",import.meta.url).href,Ht=""+new URL("../assets/Blip_hi_00002.BQSAlaYX.mp3",import.meta.url).href,Qt=""+new URL("../assets/Blip_hi_00003.Di2EzxCf.mp3",import.meta.url).href,Xt=""+new URL("../assets/Blip_hi_00004.ywAQhkrX.mp3",import.meta.url).href,Yt=""+new URL("../assets/Blip_low_00001.CPMgldSK.mp3",import.meta.url).href,qt=""+new URL("../assets/Blip_low_00002.BPcftkO5.mp3",import.meta.url).href,Jt=""+new URL("../assets/Blip_low_00003.CCXPx8Vk.mp3",import.meta.url).href,Wt=""+new URL("../assets/Blip_low_00004.BDWLfiic.mp3",import.meta.url).href,Zt=""+new URL("../assets/Blip_mid_00001.BhEVpUhi.mp3",import.meta.url).href,xt=""+new URL("../assets/Blip_mid_00002.k1Ggej5V.mp3",import.meta.url).href,te=""+new URL("../assets/Blip_mid_00003.BA1yGgJ8.mp3",import.meta.url).href,ee=""+new URL("../assets/Blip_mid_00004.l-DazQKu.mp3",import.meta.url).href,re=[{title:"Drone1",src:rt,type:"song"},{title:"Drone2",src:st,type:"song"},{title:"Blip_hi_00001",src:jt,type:"cluster"},{title:"Blip_hi_00002",src:Ht,type:"cluster"},{title:"Blip_hi_00003",src:Qt,type:"cluster"},{title:"Blip_hi_00004",src:Xt,type:"cluster"},{title:"Blip_low_00001",src:Yt,type:"cluster"},{title:"Blip_low_00002",src:qt,type:"cluster"},{title:"Blip_low_00003",src:Jt,type:"cluster"},{title:"Blip_low_00004",src:Wt,type:"cluster"},{title:"Blip_mid_00001",src:Zt,type:"cluster"},{title:"Blip_mid_00002",src:xt,type:"cluster"},{title:"Blip_mid_00003",src:te,type:"cluster"},{title:"Blip_mid_00004",src:ee,type:"cluster"},{title:"Blip_UI",src:it,type:"ui"}],se={isGloballyMuted:!0,currentPage:null,previousPage:null,drone1Sound:null,drone2Sound:null,blipSound:null,clusterSounds:new Map,isInitialized:!1,crossFading:!1},v=Tt(se),A=class A{static getInstance(){return A.instance||(A.instance=new A),A.instance}constructor(){this.initializeAudio()}async initializeAudio(){if(!m(v).isInitialized)try{const e=new E(rt,{loop:!0,volume:1,html5:!1,preload:!0}),s=new E(st,{loop:!0,volume:1,html5:!1,preload:!0}),i=new E(it,{loop:!1,volume:.5,html5:!1,preload:!0}),o=new Map,a=re.filter(l=>l.type==="cluster");for(const l of a){const c=new E(l.src,{loop:!1,volume:.7,html5:!1,preload:!0});o.set(l.title,c)}v.update(l=>({...l,drone1Sound:e,drone2Sound:s,blipSound:i,clusterSounds:o,isInitialized:!0})),console.log("Global audio initialized")}catch(e){console.error("Failed to initialize global audio:",e)}}async setGlobalMute(r){const e=m(v);if(v.update(s=>({...s,isGloballyMuted:r})),r)e.drone1Sound&&e.drone1Sound.stop(),e.drone2Sound&&e.drone2Sound.stop();else{const s=m(v);s.currentPage&&await this.switchToPage(s.currentPage)}}async switchToPage(r){const e=m(v);if(!e.isInitialized||e.crossFading){console.log("Skipping page switch - not initialized or currently crossfading");return}const s=e.currentPage;if(v.update(i=>({...i,currentPage:r,previousPage:s,crossFading:!0})),e.isGloballyMuted){v.update(i=>({...i,crossFading:!1}));return}try{const i=r==="explore"?e.drone2Sound:e.drone1Sound,o=r==="explore"?e.drone1Sound:e.drone2Sound;o&&o.howl.playing()&&(o.howl.fade(o.howl.volume(),0,1e3),setTimeout(()=>o.stop(),1e3)),i&&(i.howl.volume(0),i.play(),i.howl.fade(0,.3,1e3))}catch(i){console.error("Error switching audio page:",i)}finally{v.update(i=>({...i,crossFading:!1}))}}async playBlip(){const r=m(v);if(!(r.isGloballyMuted||!r.blipSound||!r.isInitialized))try{r.blipSound.play()}catch(e){console.error("Error playing blip:",e)}}async playClusterSound(r){const e=m(v);if(!(e.isGloballyMuted||!e.isInitialized||e.clusterSounds.size===0))try{const s=Array.from(e.clusterSounds.keys());let i=0;for(let c=0;c<r.length;c++){const n=r.charCodeAt(c);i=(i<<5)-i+n,i=i&i}const o=Math.abs(i)%s.length,a=s[o],l=e.clusterSounds.get(a);l&&l.play()}catch(s){console.error("Error playing cluster sound:",s)}}getState(){return m(v)}};K(A,"instance");let G=A;const C=G.getInstance(),U={setMute:t=>C.setGlobalMute(t),switchToPage:t=>C.switchToPage(t),playBlip:()=>C.playBlip(),playClusterSound:t=>C.playClusterSound(t),getState:()=>C.getState()};function fe(){return{playBlip:()=>{U.playBlip()},playClusterSound:o=>{U.playClusterSound(o)},switchToPage:o=>{U.switchToPage(o)},toggleMute:async o=>{await U.setMute(o)},getAudioState:()=>U.getState()}}const pe=()=>U.playBlip();export{M as a,ue as b,Mt as c,ae as d,ne as e,kt as f,v as g,ce as l,pe as p,y as r,Ot as s,fe as u};
