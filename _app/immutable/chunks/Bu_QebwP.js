var k=Object.defineProperty;var z=(i,e,t)=>e in i?k(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var l=(i,e,t)=>z(i,typeof e!="symbol"?e+"":e,t);import{be as T,y as O,o as G,r as X,u as N,bf as A,q,$ as M,a0 as C,V as b,Q,R as V,X as J,bc as j,a4 as W}from"./BdwEzn_I.js";import"./BniEmjqM.js";import"./bwUnXfoF.js";import{I as S,s as $,L as Y}from"./BvlJ5lqz.js";import{l as L,s as D}from"./ZPzR1z2S.js";function ye(i){let e=0,t=G(0),s;return()=>{T()&&(O(t),X(()=>(e===0&&(s=N(()=>i(()=>A(t)))),e+=1,()=>{q(()=>{e-=1,e===0&&(s==null||s(),s=void 0,A(t))})})))}}function be(i,e){const t=L(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.503.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const s=[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]];S(i,D({name:"arrow-left"},()=>t,{get iconNode(){return s},children:(n,r)=>{var a=M(),o=C(a);$(o,e,"default",{}),b(n,a)},$$slots:{default:!0}}))}function Fe(i,e){const t=L(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.503.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const s=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];S(i,D({name:"x"},()=>t,{get iconNode(){return s},children:(n,r)=>{var a=M(),o=C(a);$(o,e,"default",{}),b(n,a)},$$slots:{default:!0}}))}var H=Q('<div class="loader-container svelte-1513a7f"><!></div>');function Be(i){var e=H(),t=V(e);Y(t,{color:"white",pulseSize:"80px",pulseTiming:"1.5s"}),J(e),b(i,e)}const Z=""+new URL("../assets/250812_Drone 1_seamless.Bles6v51.mp3",import.meta.url).href,K=""+new URL("../assets/250812_Drone 2_seamless.DNgxXvGE.mp3",import.meta.url).href,ee=""+new URL("../assets/Blip_hi_00001.CzfUbRJ6.mp3",import.meta.url).href,te=""+new URL("../assets/Blip_hi_00002.BQSAlaYX.mp3",import.meta.url).href,se=""+new URL("../assets/Blip_hi_00003.Di2EzxCf.mp3",import.meta.url).href,ie=""+new URL("../assets/Blip_hi_00004.ywAQhkrX.mp3",import.meta.url).href,ae=""+new URL("../assets/Blip_low_00001.CPMgldSK.mp3",import.meta.url).href,ne=""+new URL("../assets/Blip_low_00002.BPcftkO5.mp3",import.meta.url).href,re=""+new URL("../assets/Blip_low_00003.CCXPx8Vk.mp3",import.meta.url).href,oe=""+new URL("../assets/Blip_low_00004.BDWLfiic.mp3",import.meta.url).href,le=""+new URL("../assets/Blip_mid_00001.BhEVpUhi.mp3",import.meta.url).href,ce=""+new URL("../assets/Blip_mid_00002.k1Ggej5V.mp3",import.meta.url).href,de=""+new URL("../assets/Blip_mid_00003.BA1yGgJ8.mp3",import.meta.url).href,ue=""+new URL("../assets/Blip_mid_00004.l-DazQKu.mp3",import.meta.url).href,m=[{title:"Drone1",src:Z,type:"song"},{title:"Drone2",src:K,type:"song"},{title:"Blip_hi_00001",src:ee,type:"cluster"},{title:"Blip_hi_00002",src:te,type:"cluster"},{title:"Blip_hi_00003",src:se,type:"cluster"},{title:"Blip_hi_00004",src:ie,type:"cluster"},{title:"Blip_low_00001",src:ae,type:"cluster"},{title:"Blip_low_00002",src:ne,type:"cluster"},{title:"Blip_low_00003",src:re,type:"cluster"},{title:"Blip_low_00004",src:oe,type:"cluster"},{title:"Blip_mid_00001",src:le,type:"cluster"},{title:"Blip_mid_00002",src:ce,type:"cluster"},{title:"Blip_mid_00003",src:de,type:"cluster"},{title:"Blip_mid_00004",src:ue,type:"cluster"}],pe={isGloballyMuted:!0,playingState:"paused",currentSong:null,globalVolume:.3},u=j(pe),Ae={setMuted:i=>{u.update(e=>({...e,isGloballyMuted:i}))},setPlayingState:i=>{u.update(e=>({...e,playingState:i}))},setCurrentSong:i=>{u.update(e=>({...e,currentSong:i}))},setVolume:i=>{u.update(e=>({...e,globalVolume:Math.max(0,Math.min(1,i))}))}};class me{constructor(){l(this,"activeFades",new Map)}async fadeTo(e,t,s={}){const{duration:n=500,onComplete:r}=s;this.cancelFade(e),isFinite(t)||(console.warn("Invalid target volume:",t,"defaulting to 0"),t=0),(!isFinite(n)||n<=0)&&(console.warn("Invalid duration:",n,"defaulting to 500"),s.duration=500),t=Math.max(0,Math.min(1,t));const a=isFinite(e.volume)?e.volume:0,o=t-a;if(Math.abs(o)<.001){r==null||r();return}const f=performance.now();return new Promise(h=>{const F=I=>{const R=I-f,w=Math.min(R/n,1);let _;t>a?_=Math.pow(w,.5):_=1-Math.pow(1-w,2);const B=a+o*_,U=Math.max(0,Math.min(1,isFinite(B)?B:0));if(e.volume=U,w<1){const P=requestAnimationFrame(F);this.activeFades.set(e,P)}else e.volume=t,this.activeFades.delete(e),r==null||r(),h()},E=requestAnimationFrame(F);this.activeFades.set(e,E)})}async fadeIn(e,t=.3,s=500){return isFinite(t)||(t=.3),(!isFinite(s)||s<=0)&&(s=500),e.volume=0,this.fadeTo(e,t,{duration:s})}async fadeOut(e,t=500){return(!isFinite(t)||t<=0)&&(t=500),this.fadeTo(e,0,{duration:t,onComplete:()=>{e.pause()}})}cancelFade(e){const t=this.activeFades.get(e);t&&(cancelAnimationFrame(t),this.activeFades.delete(e))}cancelAllFades(){this.activeFades.forEach(e=>{cancelAnimationFrame(e)}),this.activeFades.clear()}}const g=new me,c=class c{constructor(){l(this,"audioContext",null);l(this,"isAudioEnabled",!1)}static getInstance(){return c.instance||(c.instance=new c),c.instance}isMobileDevice(){return typeof window>"u"?!1:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||!!navigator.maxTouchPoints&&navigator.maxTouchPoints>2}isAudioContextReady(){var e;return this.isAudioEnabled&&((e=this.audioContext)==null?void 0:e.state)==="running"}async enableAudio(){try{return this.audioContext||(this.audioContext=new(window.AudioContext||window.webkitAudioContext)),this.audioContext.state==="suspended"&&await this.audioContext.resume(),this.isAudioEnabled=!0,this.audioContext.state==="running"}catch(e){return console.warn("Failed to enable audio context:",e),!1}}getOptimizedFadeDuration(e,t=!1){return this.isMobileDevice()?t?Math.max(100,e*.2):Math.max(200,e*.4):e}prepareAudioElement(e){this.isMobileDevice()&&(e.preload="metadata",e.addEventListener("canplaythrough",()=>{},{once:!0}),e.addEventListener("stalled",()=>{console.warn("Audio stalled on mobile, attempting to continue...")}))}supportsMultipleAudioStreams(){return!this.isMobileDevice()}};l(c,"instance");let v=c;const p=v.getInstance(),xe=()=>p.isMobileDevice(),d=class d{constructor(){l(this,"soundCache",new Map);l(this,"playingSounds",new Set)}static getInstance(){return d.instance||(d.instance=new d),d.instance}async playEffect(e,t){const s=W(u);if(!s.isGloballyMuted)try{let n;const r=m.findIndex(h=>h.title===e);r!==-1?n=m[r].src:n=e;let a=this.soundCache.get(e);a||(a=new Audio(n),a.preload="auto",p.prepareAudioElement(a),this.soundCache.set(e,a));const o=t!==void 0?t:s.globalVolume;a.currentTime=0,this.playingSounds.add(a),a.addEventListener("ended",()=>{this.playingSounds.delete(a)},{once:!0}),a.volume=0,await a.play();const f=p.getOptimizedFadeDuration(x*.3);await g.fadeIn(a,o,f)}catch(n){console.warn("Failed to play sound effect:",n)}}async stopEffect(e){const t=this.soundCache.get(e);if(t&&this.playingSounds.has(t)){const s=p.getOptimizedFadeDuration(x*.2,!0);await g.fadeOut(t,s),t.currentTime=0,this.playingSounds.delete(t)}}stopAllEffects(){this.playingSounds.forEach(e=>{g.cancelFade(e),e.pause(),e.currentTime=0}),this.playingSounds.clear()}preloadSounds(e){e.forEach(t=>{const s=m.findIndex(n=>n.title===t);if(s!==-1){const n=new Audio(m[s].src);n.preload="auto",p.prepareAudioElement(n),this.soundCache.set(t,n)}})}clearCache(){this.stopAllEffects(),this.soundCache.forEach(e=>{e.pause(),e.src=""}),this.soundCache.clear()}};l(d,"instance");let y=d;const Me=y.getInstance();let x=500;export{be as A,Be as C,Fe as X,u as a,Ae as b,ye as c,g as d,xe as i,p as m,Me as s,m as t};
