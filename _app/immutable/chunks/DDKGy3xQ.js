var I=Object.defineProperty;var T=(s,e,t)=>e in s?I(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var c=(s,e,t)=>T(s,typeof e!="symbol"?e+"":e,t);import{b as x,E as N,c as P,a3 as k,an as O,h as z,d as G,R as B,K as V,O as X,aU as Q,aL as W}from"./BnZ242CD.js";import{f as b,a as v,t as q}from"./CDB5auML.js";import"./CODNnVm9.js";import{I as S,s as L,L as J}from"./BYK1wCTk.js";import{l as A,s as M}from"./CbChFFX3.js";function ve(s,e,...t){var n=s,a=k,l;x(()=>{a!==(a=e())&&(l&&(O(l),l=null),l=P(()=>a(n,...t)))},N),z&&(n=G)}function ge(s,e){const t=A(e,["children","$$slots","$$events","$$legacy"]);S(s,M({name:"arrow-left"},()=>t,{iconNode:[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]],children:(a,l)=>{var i=b(),o=B(i);L(o,e,"default",{}),v(a,i)},$$slots:{default:!0}}))}function Fe(s,e){const t=A(e,["children","$$slots","$$events","$$legacy"]);S(s,M({name:"x"},()=>t,{iconNode:[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]],children:(a,l)=>{var i=b(),o=B(i);L(o,e,"default",{}),v(a,i)},$$slots:{default:!0}}))}var Y=q('<div class="loader-container svelte-1513a7f"><!></div>');function Be(s){var e=Y(),t=V(e);J(t,{color:"white",pulseSize:"80px",pulseTiming:"1.5s"}),X(e),v(s,e)}const j=""+new URL("../assets/250812_Drone 1_seamless.Bles6v51.mp3",import.meta.url).href,H=""+new URL("../assets/250812_Drone 2_seamless.DNgxXvGE.mp3",import.meta.url).href,K=""+new URL("../assets/Blip_hi_00001.CzfUbRJ6.mp3",import.meta.url).href,Z=""+new URL("../assets/Blip_hi_00002.BQSAlaYX.mp3",import.meta.url).href,ee=""+new URL("../assets/Blip_hi_00003.Di2EzxCf.mp3",import.meta.url).href,te=""+new URL("../assets/Blip_hi_00004.ywAQhkrX.mp3",import.meta.url).href,se=""+new URL("../assets/Blip_low_00001.CPMgldSK.mp3",import.meta.url).href,ae=""+new URL("../assets/Blip_low_00002.BPcftkO5.mp3",import.meta.url).href,ie=""+new URL("../assets/Blip_low_00003.CCXPx8Vk.mp3",import.meta.url).href,ne=""+new URL("../assets/Blip_low_00004.BDWLfiic.mp3",import.meta.url).href,le=""+new URL("../assets/Blip_mid_00001.BhEVpUhi.mp3",import.meta.url).href,oe=""+new URL("../assets/Blip_mid_00002.k1Ggej5V.mp3",import.meta.url).href,re=""+new URL("../assets/Blip_mid_00003.BA1yGgJ8.mp3",import.meta.url).href,ce=""+new URL("../assets/Blip_mid_00004.l-DazQKu.mp3",import.meta.url).href,d=[{title:"Drone1",src:j,type:"song"},{title:"Drone2",src:H,type:"song"},{title:"Blip_hi_00001",src:K,type:"cluster"},{title:"Blip_hi_00002",src:Z,type:"cluster"},{title:"Blip_hi_00003",src:ee,type:"cluster"},{title:"Blip_hi_00004",src:te,type:"cluster"},{title:"Blip_low_00001",src:se,type:"cluster"},{title:"Blip_low_00002",src:ae,type:"cluster"},{title:"Blip_low_00003",src:ie,type:"cluster"},{title:"Blip_low_00004",src:ne,type:"cluster"},{title:"Blip_mid_00001",src:le,type:"cluster"},{title:"Blip_mid_00002",src:oe,type:"cluster"},{title:"Blip_mid_00003",src:re,type:"cluster"},{title:"Blip_mid_00004",src:ce,type:"cluster"}],pe={isGloballyMuted:!0,playingState:"paused",currentSong:null,globalVolume:.3},p=Q(pe),be={setMuted:s=>{p.update(e=>({...e,isGloballyMuted:s}))},setPlayingState:s=>{p.update(e=>({...e,playingState:s}))},setCurrentSong:s=>{p.update(e=>({...e,currentSong:s}))},setVolume:s=>{p.update(e=>({...e,globalVolume:Math.max(0,Math.min(1,s))}))}};class de{constructor(){c(this,"activeFades",new Map)}async fadeTo(e,t,n={}){const{duration:a=500,onComplete:l}=n;this.cancelFade(e),isFinite(t)||(console.warn("Invalid target volume:",t,"defaulting to 0"),t=0),(!isFinite(a)||a<=0)&&(console.warn("Invalid duration:",a,"defaulting to 500"),n.duration=500),t=Math.max(0,Math.min(1,t));const i=isFinite(e.volume)?e.volume:0,o=t-i;if(Math.abs(o)<.001){l==null||l();return}const u=performance.now();return new Promise(R=>{const g=C=>{const E=C-u,f=Math.min(E/a,1);let h;t>i?h=Math.pow(f,.5):h=1-Math.pow(1-f,2);const F=i+o*h,D=Math.max(0,Math.min(1,isFinite(F)?F:0));if(e.volume=D,f<1){const U=requestAnimationFrame(g);this.activeFades.set(e,U)}else e.volume=t,this.activeFades.delete(e),l==null||l(),R()},$=requestAnimationFrame(g);this.activeFades.set(e,$)})}async fadeIn(e,t=.3,n=500){return isFinite(t)||(t=.3),(!isFinite(n)||n<=0)&&(n=500),e.volume=0,this.fadeTo(e,t,{duration:n})}async fadeOut(e,t=500){return(!isFinite(t)||t<=0)&&(t=500),this.fadeTo(e,0,{duration:t,onComplete:()=>{e.pause()}})}cancelFade(e){const t=this.activeFades.get(e);t&&(cancelAnimationFrame(t),this.activeFades.delete(e))}cancelAllFades(){this.activeFades.forEach(e=>{cancelAnimationFrame(e)}),this.activeFades.clear()}}const _=new de,r=class r{constructor(){c(this,"soundCache",new Map);c(this,"playingSounds",new Set)}static getInstance(){return r.instance||(r.instance=new r),r.instance}async playEffect(e,t){if(!W(p).isGloballyMuted)try{let a;const l=d.findIndex(u=>u.title===e);l!==-1?a=d[l].src:a=e;let i=this.soundCache.get(e);i||(i=new Audio(a),i.preload="auto",this.soundCache.set(e,i));const o=t!==void 0?t:y;i.currentTime=0,this.playingSounds.add(i),i.addEventListener("ended",()=>{this.playingSounds.delete(i)},{once:!0}),i.volume=0,await i.play(),await _.fadeIn(i,o,m*.3)}catch(a){console.warn("Failed to play sound effect:",a)}}async stopEffect(e){const t=this.soundCache.get(e);t&&this.playingSounds.has(t)&&(await _.fadeOut(t,m*.2),t.currentTime=0,this.playingSounds.delete(t))}stopAllEffects(){this.playingSounds.forEach(e=>{_.cancelFade(e),e.pause(),e.currentTime=0}),this.playingSounds.clear()}preloadSounds(e){e.forEach(t=>{const n=d.findIndex(a=>a.title===t);if(n!==-1){const a=new Audio(d[n].src);a.preload="auto",this.soundCache.set(t,a)}})}clearCache(){this.stopAllEffects(),this.soundCache.forEach(e=>{e.pause(),e.src=""}),this.soundCache.clear()}};c(r,"instance");let w=r;const Se=w.getInstance(),me={INSTANT:0,FAST:250,NORMAL:500,SLOW:1e3,VERY_SLOW:2e3};let m=500,y=1;const Le={setFadeDuration:s=>{m=typeof s=="number"?s:me[s]},getFadeDuration:()=>m,setClusterVolume:s=>{y=Math.max(0,Math.min(1,s))},getClusterVolume:()=>y};export{ge as A,Be as C,Fe as X,p as a,be as b,_ as c,Le as d,ve as e,Se as s,d as t};
