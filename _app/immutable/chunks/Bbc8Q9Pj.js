var P=Object.defineProperty;var T=(s,e,t)=>e in s?P(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var p=(s,e,t)=>T(s,typeof e!="symbol"?e+"":e,t);import{be as k,y as O,o as N,r as z,u as G,bf as S,q as V,$ as M,a0 as A,V as b,Q as X,R as q,X as Q,bc as W,a4 as J}from"./BdwEzn_I.js";import"./BniEmjqM.js";import"./bwUnXfoF.js";import{I as L,s as $,L as Y}from"./BvlJ5lqz.js";import{l as D,s as R}from"./ZPzR1z2S.js";function ve(s){let e=0,t=N(0),a;return()=>{k()&&(O(t),z(()=>(e===0&&(a=G(()=>s(()=>S(t)))),e+=1,()=>{V(()=>{e-=1,e===0&&(a==null||a(),a=void 0,S(t))})})))}}function be(s,e){const t=D(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.503.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const a=[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]];L(s,R({name:"arrow-left"},()=>t,{get iconNode(){return a},children:(n,r)=>{var i=M(),l=A(i);$(l,e,"default",{}),b(n,i)},$$slots:{default:!0}}))}function Fe(s,e){const t=D(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.503.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const a=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];L(s,R({name:"x"},()=>t,{get iconNode(){return a},children:(n,r)=>{var i=M(),l=A(i);$(l,e,"default",{}),b(n,i)},$$slots:{default:!0}}))}var j=X('<div class="loader-container svelte-1513a7f"><!></div>');function Be(s){var e=j(),t=q(e);Y(t,{color:"white",pulseSize:"80px",pulseTiming:"1.5s"}),Q(e),b(s,e)}const H=""+new URL("../assets/250812_Drone 1_seamless.Bles6v51.mp3",import.meta.url).href,Z=""+new URL("../assets/250812_Drone 2_seamless.DNgxXvGE.mp3",import.meta.url).href,K=""+new URL("../assets/Blip_hi_00001.CzfUbRJ6.mp3",import.meta.url).href,ee=""+new URL("../assets/Blip_hi_00002.BQSAlaYX.mp3",import.meta.url).href,te=""+new URL("../assets/Blip_hi_00003.Di2EzxCf.mp3",import.meta.url).href,se=""+new URL("../assets/Blip_hi_00004.ywAQhkrX.mp3",import.meta.url).href,ae=""+new URL("../assets/Blip_low_00001.CPMgldSK.mp3",import.meta.url).href,ie=""+new URL("../assets/Blip_low_00002.BPcftkO5.mp3",import.meta.url).href,ne=""+new URL("../assets/Blip_low_00003.CCXPx8Vk.mp3",import.meta.url).href,re=""+new URL("../assets/Blip_low_00004.BDWLfiic.mp3",import.meta.url).href,le=""+new URL("../assets/Blip_mid_00001.BhEVpUhi.mp3",import.meta.url).href,oe=""+new URL("../assets/Blip_mid_00002.k1Ggej5V.mp3",import.meta.url).href,ce=""+new URL("../assets/Blip_mid_00003.BA1yGgJ8.mp3",import.meta.url).href,pe=""+new URL("../assets/Blip_mid_00004.l-DazQKu.mp3",import.meta.url).href,u=[{title:"Drone1",src:H,type:"song"},{title:"Drone2",src:Z,type:"song"},{title:"Blip_hi_00001",src:K,type:"cluster"},{title:"Blip_hi_00002",src:ee,type:"cluster"},{title:"Blip_hi_00003",src:te,type:"cluster"},{title:"Blip_hi_00004",src:se,type:"cluster"},{title:"Blip_low_00001",src:ae,type:"cluster"},{title:"Blip_low_00002",src:ie,type:"cluster"},{title:"Blip_low_00003",src:ne,type:"cluster"},{title:"Blip_low_00004",src:re,type:"cluster"},{title:"Blip_mid_00001",src:le,type:"cluster"},{title:"Blip_mid_00002",src:oe,type:"cluster"},{title:"Blip_mid_00003",src:ce,type:"cluster"},{title:"Blip_mid_00004",src:pe,type:"cluster"}],de={isGloballyMuted:!0,playingState:"paused",currentSong:null,globalVolume:.3},d=W(de),Se={setMuted:s=>{d.update(e=>({...e,isGloballyMuted:s}))},setPlayingState:s=>{d.update(e=>({...e,playingState:s}))},setCurrentSong:s=>{d.update(e=>({...e,currentSong:s}))},setVolume:s=>{d.update(e=>({...e,globalVolume:Math.max(0,Math.min(1,s))}))}};class ue{constructor(){p(this,"activeFades",new Map)}async fadeTo(e,t,a={}){const{duration:n=500,onComplete:r}=a;this.cancelFade(e),isFinite(t)||(console.warn("Invalid target volume:",t,"defaulting to 0"),t=0),(!isFinite(n)||n<=0)&&(console.warn("Invalid duration:",n,"defaulting to 500"),a.duration=500),t=Math.max(0,Math.min(1,t));const i=isFinite(e.volume)?e.volume:0,l=t-i;if(Math.abs(l)<.001){r==null||r();return}const m=performance.now();return new Promise(f=>{const F=I=>{const x=I-m,h=Math.min(x/n,1);let _;t>i?_=Math.pow(h,.5):_=1-Math.pow(1-h,2);const B=i+l*_,E=Math.max(0,Math.min(1,isFinite(B)?B:0));if(e.volume=E,h<1){const U=requestAnimationFrame(F);this.activeFades.set(e,U)}else e.volume=t,this.activeFades.delete(e),r==null||r(),f()},C=requestAnimationFrame(F);this.activeFades.set(e,C)})}async fadeIn(e,t=.3,a=500){return isFinite(t)||(t=.3),(!isFinite(a)||a<=0)&&(a=500),e.volume=0,this.fadeTo(e,t,{duration:a})}async fadeOut(e,t=500){return(!isFinite(t)||t<=0)&&(t=500),this.fadeTo(e,0,{duration:t,onComplete:()=>{e.pause()}})}cancelFade(e){const t=this.activeFades.get(e);t&&(cancelAnimationFrame(t),this.activeFades.delete(e))}cancelAllFades(){this.activeFades.forEach(e=>{cancelAnimationFrame(e)}),this.activeFades.clear()}}const w=new ue,o=class o{constructor(){p(this,"soundCache",new Map);p(this,"playingSounds",new Set)}static getInstance(){return o.instance||(o.instance=new o),o.instance}async playEffect(e,t){if(!J(d).isGloballyMuted)try{let n;const r=u.findIndex(f=>f.title===e);r!==-1?n=u[r].src:n=e;let i=this.soundCache.get(e);i||(i=new Audio(n),i.preload="auto",this.soundCache.set(e,i));const l=t!==void 0?t:y;i.currentTime=0,this.playingSounds.add(i),i.addEventListener("ended",()=>{this.playingSounds.delete(i)},{once:!0}),i.volume=0,await i.play();const m=v?c*.15:c*.3;await w.fadeIn(i,l,m)}catch(n){console.warn("Failed to play sound effect:",n)}}async stopEffect(e){const t=this.soundCache.get(e);if(t&&this.playingSounds.has(t)){const a=v?c*.1:c*.2;await w.fadeOut(t,a),t.currentTime=0,this.playingSounds.delete(t)}}stopAllEffects(){this.playingSounds.forEach(e=>{w.cancelFade(e),e.pause(),e.currentTime=0}),this.playingSounds.clear()}preloadSounds(e){e.forEach(t=>{const a=u.findIndex(n=>n.title===t);if(a!==-1){const n=new Audio(u[a].src);n.preload="auto",this.soundCache.set(t,n)}})}clearCache(){this.stopAllEffects(),this.soundCache.forEach(e=>{e.pause(),e.src=""}),this.soundCache.clear()}};p(o,"instance");let g=o;const Me=g.getInstance(),me={INSTANT:0,FAST:250,NORMAL:500,SLOW:1e3,VERY_SLOW:2e3};let c=500,y=1,v=!1;typeof window<"u"&&(v=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2);const Ae={setFadeDuration:s=>{c=typeof s=="number"?s:me[s]},getFadeDuration:()=>c,setClusterVolume:s=>{y=Math.max(0,Math.min(1,s))},getClusterVolume:()=>y};export{be as A,Be as C,Fe as X,Ae as a,d as b,ve as c,Se as d,w as e,Me as s,u as t};
