var w=Object.defineProperty;var E=(a,t,e)=>t in a?w(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var d=(a,t,e)=>E(a,typeof t!="symbol"?t+"":t,e);import{b as M,E as b,c as C,a4 as _,a9 as L,h as A,d as F,R as h,K as P,O as T,aa as x,ab as I}from"./Dh_q_AIo.js";import{f as m,a as f,t as N}from"./H1z1FJes.js";import"./C370JjdC.js";import{I as g,s as S,L as D}from"./Cdh1kfaN.js";import{l as y,s as $}from"./CvJ11vW7.js";function W(a,t,...e){var n=a,s=_,r;M(()=>{s!==(s=t())&&(r&&(L(r),r=null),r=C(()=>s(n,...e)))},b),A&&(n=F)}function Z(a,t){const e=y(t,["children","$$slots","$$events","$$legacy"]);g(a,$({name:"arrow-left"},()=>e,{iconNode:[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]],children:(s,r)=>{var o=m(),l=h(o);S(l,t,"default",{}),f(s,o)},$$slots:{default:!0}}))}function q(a,t){const e=y(t,["children","$$slots","$$events","$$legacy"]);g(a,$({name:"x"},()=>e,{iconNode:[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]],children:(s,r)=>{var o=m(),l=h(o);S(l,t,"default",{}),f(s,o)},$$slots:{default:!0}}))}var R=N('<div class="loader-container svelte-1513a7f"><!></div>');function J(a){var t=R(),e=P(t);D(e,{color:"white",pulseSize:"80px",pulseTiming:"1.5s"}),T(t),f(a,t)}const V=""+new URL("../assets/02_SatelliteMelody.f4bBor3d.mp3",import.meta.url).href,X=""+new URL("../assets/01_PrinterDroneLow.DDMjtZvF.mp3",import.meta.url).href,O=""+new URL("../assets/FX_EchoBlips.PuiL3WTE.mp3",import.meta.url).href,u=[{title:"SatellliteMelody",src:V},{title:"PrinterDroneLow",src:X},{title:"FXecho",src:O}],U={isGloballyMuted:!0,playingState:"paused",currentSong:null,globalVolume:.3},c=x(U),Q={setMuted:a=>{c.update(t=>({...t,isGloballyMuted:a}))},setPlayingState:a=>{c.update(t=>({...t,playingState:a}))},setCurrentSong:a=>{c.update(t=>({...t,currentSong:a}))},setVolume:a=>{c.update(t=>({...t,globalVolume:Math.max(0,Math.min(1,a))}))}},i=class i{constructor(){d(this,"soundCache",new Map);d(this,"playingSounds",new Set)}static getInstance(){return i.instance||(i.instance=new i),i.instance}async playEffect(t,e){const n=I(c);if(!n.isGloballyMuted)try{let s;const r=u.findIndex(v=>v.title===t);r!==-1?s=u[r].src:s=t;let o=this.soundCache.get(t);o||(o=new Audio(s),o.preload="auto",this.soundCache.set(t,o));const l=e!==void 0?e:n.globalVolume*.5;o.volume=l,o.currentTime=0,this.playingSounds.add(o),o.addEventListener("ended",()=>{this.playingSounds.delete(o)},{once:!0}),await o.play()}catch(s){console.warn("Failed to play sound effect:",s)}}stopEffect(t){const e=this.soundCache.get(t);e&&this.playingSounds.has(e)&&(e.pause(),e.currentTime=0,this.playingSounds.delete(e))}stopAllEffects(){this.playingSounds.forEach(t=>{t.pause(),t.currentTime=0}),this.playingSounds.clear()}preloadSounds(t){t.forEach(e=>{const n=u.findIndex(s=>s.title===e);if(n!==-1){const s=new Audio(u[n].src);s.preload="auto",this.soundCache.set(e,s)}})}clearCache(){this.stopAllEffects(),this.soundCache.forEach(t=>{t.pause(),t.src=""}),this.soundCache.clear()}};d(i,"instance");let p=i;const Y=p.getInstance(),K={MODAL_OPEN:"FXecho"};export{Z as A,J as C,K as S,q as X,c as a,Q as b,W as c,Y as s,u as t};
