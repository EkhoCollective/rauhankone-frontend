var E=Object.defineProperty;var M=(a,t,e)=>t in a?E(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var d=(a,t,e)=>M(a,typeof t!="symbol"?t+"":t,e);import{b as _,E as b,c as v,a4 as C,a9 as A,h as F,d as L,_ as f,aa as P,ab as I}from"./BAWTPune.js";import{f as h,a as m}from"./e0w5MTuB.js";import"./CDkE-16V.js";import{I as g,s as S}from"./DCc6tS3d.js";import{l as y,s as $}from"./DQYehM2M.js";function O(a,t,...e){var n=a,s=C,r;_(()=>{s!==(s=t())&&(r&&(A(r),r=null),r=v(()=>s(n,...e)))},b),F&&(n=L)}function z(a,t){const e=y(t,["children","$$slots","$$events","$$legacy"]);g(a,$({name:"arrow-left"},()=>e,{iconNode:[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]],children:(s,r)=>{var o=h(),l=f(o);S(l,t,"default",{}),m(s,o)},$$slots:{default:!0}}))}function B(a,t){const e=y(t,["children","$$slots","$$events","$$legacy"]);g(a,$({name:"x"},()=>e,{iconNode:[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]],children:(s,r)=>{var o=h(),l=f(o);S(l,t,"default",{}),m(s,o)},$$slots:{default:!0}}))}const N=""+new URL("../assets/02_SatelliteMelody.f4bBor3d.mp3",import.meta.url).href,T=""+new URL("../assets/01_PrinterDroneLow.DDMjtZvF.mp3",import.meta.url).href,x=""+new URL("../assets/FX_EchoBlips.PuiL3WTE.mp3",import.meta.url).href,u=[{title:"SatellliteMelody",src:N},{title:"PrinterDroneLow",src:T},{title:"FXecho",src:x}],D={isGloballyMuted:!0,playingState:"paused",currentSong:null,globalVolume:.3},c=P(D),j={setMuted:a=>{c.update(t=>({...t,isGloballyMuted:a}))},setPlayingState:a=>{c.update(t=>({...t,playingState:a}))},setCurrentSong:a=>{c.update(t=>({...t,currentSong:a}))},setVolume:a=>{c.update(t=>({...t,globalVolume:Math.max(0,Math.min(1,a))}))}},i=class i{constructor(){d(this,"soundCache",new Map);d(this,"playingSounds",new Set)}static getInstance(){return i.instance||(i.instance=new i),i.instance}async playEffect(t,e){const n=I(c);if(!n.isGloballyMuted)try{let s;const r=u.findIndex(w=>w.title===t);r!==-1?s=u[r].src:s=t;let o=this.soundCache.get(t);o||(o=new Audio(s),o.preload="auto",this.soundCache.set(t,o));const l=e!==void 0?e:n.globalVolume*.5;o.volume=l,o.currentTime=0,this.playingSounds.add(o),o.addEventListener("ended",()=>{this.playingSounds.delete(o)},{once:!0}),await o.play()}catch(s){console.warn("Failed to play sound effect:",s)}}stopEffect(t){const e=this.soundCache.get(t);e&&this.playingSounds.has(e)&&(e.pause(),e.currentTime=0,this.playingSounds.delete(e))}stopAllEffects(){this.playingSounds.forEach(t=>{t.pause(),t.currentTime=0}),this.playingSounds.clear()}preloadSounds(t){t.forEach(e=>{const n=u.findIndex(s=>s.title===e);if(n!==-1){const s=new Audio(u[n].src);s.preload="auto",this.soundCache.set(e,s)}})}clearCache(){this.stopAllEffects(),this.soundCache.forEach(t=>{t.pause(),t.src=""}),this.soundCache.clear()}};d(i,"instance");let p=i;const H=p.getInstance(),W={MODAL_OPEN:"FXecho"};export{z as A,W as S,B as X,c as a,j as b,O as c,H as s,u as t};
