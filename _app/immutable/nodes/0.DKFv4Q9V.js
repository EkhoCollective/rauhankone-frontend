import{f as Z,a as y,e as V,t as T,b as z,d as J,s as ee,i as Ie}from"../chunks/GdSFoomi.js";import{b as be,h as P,a as ke,aO as le,f as Ee,g as Pe,s as Ne,i as ie,U as K,ag as Y,w as ce,c as q,q as Oe,d as ye,aA as de,az as ue,aP as ve,aL as Ce,j as fe,p as D,R as Me,z as _e,a0 as Le,aQ as je,aR as Re,_ as G,J as H,K as f,O as d,Q as I,M as W,N as U,m as i,W as pe,v as S,Y as E,aS as qe,X as De}from"../chunks/D04Ra_xs.js";import{i as ae}from"../chunks/QKhQhmIP.js";import{X as ze,A as Ve,a as me,s as Ge,t as He,b as M,c as Ue}from"../chunks/ABllBN0s.js";import{I as te,s as oe,c as Qe,i as Fe,t as N,b as Ye,e as ge,a as Xe,f as j}from"../chunks/CcYZuHdo.js";import{_ as Q}from"../chunks/Dp1pzeXC.js";import{r as F,b as we,g as Be,$ as Se,a as he,w as Te}from"../chunks/l5p4w3wV.js";import{p as re}from"../chunks/BMQp19fw.js";import{c as Je}from"../chunks/a0c_ePl_.js";import{l as ne,s as se,p as Ke}from"../chunks/CPIGmdVa.js";import{C as We,L as Ze}from"../chunks/BerYgjcu.js";import{g as ea}from"../chunks/DAiGBAj_.js";const X=0,R=1,B=2;function aa(r,e,a,m,c){P&&ke();var t=r,s=Le(),u=Ce,o=K,v,_,b,l=(s?ce:_e)(void 0),p=(s?ce:_e)(void 0),$=!1;function k(g,n){$=!0,n&&(de(w),ue(w),ve(u));try{g===X&&a&&(v?fe(v):v=q(()=>a(t))),g===R&&m&&(_?fe(_):_=q(()=>m(t,l))),g!==X&&v&&D(v,()=>v=null),g!==R&&_&&D(_,()=>_=null),g!==B&&b&&D(b,()=>b=null)}finally{n&&(ve(null),ue(null),de(null),Me())}}var w=be(()=>{if(o===(o=e()))return;let g=P&&le(o)===(t.data===Ee);if(g&&(t=Pe(),Ne(t),ie(!1),g=!0),le(o)){var n=o;$=!1,n.then(h=>{n===o&&(Y(l,h),k(R,!0))},h=>{if(n===o)throw Y(p,h),k(B,!0),p.v}),P?a&&(v=q(()=>a(t))):Oe(()=>{$||k(X,!0)})}else Y(l,o),k(R,!1);return g&&ie(!0),()=>o=K});P&&(t=ye)}function ta(r,e,a){P&&ke();var m=r,c=K,t,s=Le()?je:Re;be(()=>{s(c,c=e())&&(t&&D(t),t=q(()=>a(m)))}),P&&(m=ye)}const oa=!0,za=Object.freeze(Object.defineProperty({__proto__:null,prerender:oa},Symbol.toStringTag,{value:"Module"})),$e="en";F("en",()=>Q(()=>import("../chunks/ICEdU12j.js"),[],import.meta.url));F("fi",()=>Q(()=>import("../chunks/CH3oJwPu.js"),[],import.meta.url));F("sv",()=>Q(()=>import("../chunks/D2SZLOoF.js"),[],import.meta.url));F("sa",()=>Q(()=>import("../chunks/DS1uFp8_.js"),[],import.meta.url));we({fallbackLocale:$e,initialLocale:Be()||$e});async function ra(){try{const e=await fetch("https://peacemachine.eu/auth/app-token",{method:"POST",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error(`Error ${e.status}: ${await e.text()}`);const a=await e.json();return localStorage.setItem("accessToken",a.access_token),localStorage.setItem("refreshToken",a.refresh_token),a}catch(r){return console.error("Error getting auth token:",r),null}}function na(r,e){const a=ne(e,["children","$$slots","$$events","$$legacy"]);te(r,se({name:"globe"},()=>a,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"}],["path",{d:"M2 12h20"}]],children:(c,t)=>{var s=Z(),u=G(s);oe(u,e,"default",{}),y(c,s)},$$slots:{default:!0}}))}function sa(r,e){const a=ne(e,["children","$$slots","$$events","$$legacy"]);te(r,se({name:"volume-2"},()=>a,{iconNode:[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z"}],["path",{d:"M16 9a5 5 0 0 1 0 6"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728"}]],children:(c,t)=>{var s=Z(),u=G(s);oe(u,e,"default",{}),y(c,s)},$$slots:{default:!0}}))}function la(r,e){const a=ne(e,["children","$$slots","$$events","$$legacy"]);te(r,se({name:"volume-x"},()=>a,{iconNode:[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15"}]],children:(c,t)=>{var s=Z(),u=G(s);oe(u,e,"default",{}),y(c,s)},$$slots:{default:!0}}))}var ia=(r,e)=>e.closeLangCard(),ca=(r,e,a)=>e(a()),da=T("<button> </button>"),ua=T('<div class="card-lang-container svelte-dj9995"><div class="card-header-container svelte-dj9995"><button class="btn btn-close svelte-dj9995"><!></button></div> <div class="card-btn-container svelte-dj9995"></div> <div class="card-extra-container svelte-dj9995"><div class="card-checkmark-container svelte-dj9995"><!></div> <div> </div></div></div>');function va(r,e){H(e,!0);const[a,m]=ee(),c=()=>z(he,"$locale",a),t=()=>z(Se,"$_",a);let s=Ke(e,"translate",15);const u=[{code:"en",name:"English"},{code:"fi",name:"Suomi"},{code:"sv",name:"Svenska"},{code:"sa",name:"SÃ¡megiella"}];async function o(h){he.set(h),localStorage.setItem("locale",h),await Te().then(()=>{e.closeLangCard(!1)})}var v=ua(),_=f(v),b=f(_);b.__click=[ia,e];var l=f(b);ze(l,{color:"#ffffff"}),d(b),d(_);var p=I(_,2);Qe(p,21,()=>u,Fe,(h,O)=>{let A=()=>i(O).code,L=()=>i(O).name;var x=da();let C;x.__click=[ca,o,A];var xe=f(x,!0);d(x),W(Ae=>{C=Je(x,1,"btn btn-lang svelte-dj9995",null,C,Ae),J(xe,L())},[()=>({"active-lang":c()===A()})]),y(h,x)}),d(p);var $=I(p,2),k=f($),w=f(k);We(w,{get checkValue(){return s()},set checkValue(h){s(h)}}),d(k);var g=I(k,2),n=f(g,!0);d(g),d($),d(v),W(h=>J(n,h),[()=>t()("btn_translate_check")]),y(r,v),U(),m()}V(["click"]);V(["click"]);var fa=T('<div class="loader-container svelte-1513a7f"><!></div>');function _a(r){var e=fa(),a=f(e);Ze(a,{color:"white",pulseSize:"80px",pulseTiming:"1.5s"}),d(e),y(r,e)}var pa=()=>ea("/"),ma=T('<div class="back-btn-container svelte-keeycg"><button class="btn svelte-keeycg"><!> </button></div>'),ga=(r,e)=>e.toggleLang(),ha=T('<div class="card-header-container svelte-keeycg"><!> <div class="lang-btn-container svelte-keeycg"><button class="btn svelte-keeycg"><!></button></div></div>');function $a(r,e){H(e,!0);const[a,m]=ee(),c=()=>z(Se,"$_",a);var t=ha(),s=f(t);{var u=b=>{var l=ma(),p=f(l);p.__click=[pa];var $=f(p);Ve($,{color:"#ffffff"});var k=I($);d(p),d(l),W(w=>J(k,` ${w??""}`),[()=>c()("btn_exit")]),N(3,l,()=>Ye),y(b,l)};ae(s,b=>{re.url.pathname==="/explore"&&b(u)})}var o=I(s,2),v=f(o);v.__click=[ga,e];var _=f(v);na(_,{color:"#ffffff"}),d(v),d(o),d(t),y(r,t),U(),m()}V(["click"]);var ba=(r,e)=>e(),ka=T('<div class="audio-icon-container"><button class="btn svelte-1ktsaq8"><!></button></div>');function ya(r,e){H(e,!0);const[a,m]=ee(),c=()=>z(me,"$audioStore",a);let t=E(0),s=E(-1),u=E("paused"),o=E(null);function v(){me.update(n=>{const h=!n.isGloballyMuted;return h?(i(o)&&i(o).pause(),Ge.stopAllEffects(),S(u,"paused")):i(u)==="paused"&&b(),{...n,isGloballyMuted:h}})}function _(){i(o)&&(i(o).pause(),S(o,null)),S(o,new Audio(He[i(t)].src),!0),i(o).volume=.3,i(o).loop=!0,i(o).play(),S(s,i(t),!0),M.setCurrentSong(i(o)),M.setVolume(.3)}function b(){i(u)==="playing"&&l(),S(u,"playing"),M.setPlayingState("playing"),_()}function l(){var n;S(u,"paused"),M.setPlayingState("paused"),(n=i(o))==null||n.pause()}pe(()=>{re.url.pathname==="/explore"?S(t,1):S(t,0)}),pe(()=>{i(u)==="playing"&&i(t)!==i(s)&&_()});var p=ka(),$=f(p);$.__click=[ba,v];var k=f($);{var w=n=>{la(n,{color:"#ffffff"})},g=n=>{sa(n,{color:"#ffffff"})};ae(k,n=>{c().isGloballyMuted?n(w):n(g,!1)})}d($),d(p),y(r,p),U(),m()}V(["click"]);var La=T('<link rel="icon" type="image/svg" href="/favicon.ico">'),wa=T('<div class="lang-container svelte-1omww81"><!></div>'),Sa=T('<div class="page-container"><!></div>'),Ta=T('<!> <div class="header-container svelte-1omww81"><!></div> <div class="audio-control-container svelte-1omww81"><!></div> <!>',1),xa=T('<div class="app svelte-1omww81"><!></div>');function Va(r,e){H(e,!0);let a=E(null),m=E(!1),c=500,t=E(!1);qe("questions",()=>i(a)),we({fallbackLocale:"en",initialLocale:"en"});const s=()=>({API_ENDPOINT:"/get_questions",API_METHOD:"POST",REQUEST_BODY:{question_type:"starter"}});async function u(){await ra().then(()=>{o()}).catch(l=>{throw ge(500,"Failed to get token")})}async function o(){await Xe(s()).then(l=>{S(a,l,!0)}).catch(l=>{throw ge(500,"Failed to get questions")})}let v=()=>{S(m,!i(m))};De(()=>{window.scrollTo(0,0),u()});var _=xa();Ie(l=>{var p=La();y(l,p)});var b=f(_);aa(b,Te,l=>{_a(l)},l=>{var p=Ta(),$=G(p);{var k=A=>{var L=wa(),x=f(L);va(x,{closeLangCard:v,get translate(){return i(t)},set translate(C){S(t,C,!0)}}),d(L),N(1,L,()=>j,()=>({duration:c})),N(2,L,()=>j,()=>({duration:c})),y(A,L)};ae($,A=>{i(m)&&A(k)})}var w=I($,2),g=f(w);$a(g,{toggleLang:v}),d(w);var n=I(w,2),h=f(n);ya(h,{}),d(n);var O=I(n,2);ta(O,()=>re.url.pathname,A=>{var L=Sa(),x=f(L);Ue(x,()=>e.children),d(L),N(1,L,()=>j,()=>({duration:c})),N(2,L,()=>j,()=>({duration:c})),y(A,L)}),y(l,p)}),d(_),y(r,_),U()}export{Va as component,za as universal};
