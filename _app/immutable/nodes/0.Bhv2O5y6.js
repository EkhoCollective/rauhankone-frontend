import{f as W,a as L,e as D,t as x,b as R,d as B,s as Z,i as Ee}from"../chunks/e0w5MTuB.js";import{b as be,h as P,a as ke,aO as le,f as Pe,g as we,s as je,i as ie,U as J,ag as F,w as ce,c as M,q as Ne,d as ye,aA as de,az as ue,aP as ve,aL as Oe,j as fe,p as q,R as Ce,z as _e,a0 as Le,aQ as Me,aR as qe,_ as z,J as V,K as f,O as d,Q as A,M as K,N as G,m as l,W as pe,v as T,Y as I,aS as Re,X as De}from"../chunks/BAWTPune.js";import{i as ee}from"../chunks/BqxJA0kB.js";import{X as ze,a as me,s as Ve,t as Ge,b as N,A as He,c as Ue}from"../chunks/8KePMcwG.js";import{I as ae,s as te,c as Qe,i as Fe,t as j,b as Ye,e as he,a as Xe,f as O}from"../chunks/DCc6tS3d.js";import{_ as H}from"../chunks/Dp1pzeXC.js";import{r as U,b as Se,g as Be,$ as Te,a as ge,w as xe}from"../chunks/CDkE-16V.js";import{p as oe}from"../chunks/9u8hQc_p.js";import{c as Je}from"../chunks/9RBUQe7M.js";import{l as re,s as ne,p as Ke}from"../chunks/DQYehM2M.js";import{C as We,L as Ze}from"../chunks/GgsAFKhL.js";import{g as ea}from"../chunks/CUHreXcX.js";const Y=0,C=1,X=2;function aa(r,e,a,g,i){P&&ke();var t=r,s=Le(),u=Oe,o=J,v,_,k,p=(s?ce:_e)(void 0),m=(s?ce:_e)(void 0),$=!1;function b(h,n){$=!0,n&&(de(S),ue(S),ve(u));try{h===Y&&a&&(v?fe(v):v=M(()=>a(t))),h===C&&g&&(_?fe(_):_=M(()=>g(t,p))),h!==Y&&v&&q(v,()=>v=null),h!==C&&_&&q(_,()=>_=null),h!==X&&k&&q(k,()=>k=null)}finally{n&&(ve(null),ue(null),de(null),Ce())}}var S=be(()=>{if(o===(o=e()))return;let h=P&&le(o)===(t.data===Pe);if(h&&(t=we(),je(t),ie(!1),h=!0),le(o)){var n=o;$=!1,n.then(c=>{n===o&&(F(p,c),b(C,!0))},c=>{if(n===o)throw F(m,c),b(X,!0),m.v}),P?a&&(v=M(()=>a(t))):Ne(()=>{$||b(Y,!0)})}else F(p,o),b(C,!1);return h&&ie(!0),()=>o=J});P&&(t=ye)}function ta(r,e,a){P&&ke();var g=r,i=J,t,s=Le()?Me:qe;be(()=>{s(i,i=e())&&(t&&q(t),t=M(()=>a(g)))}),P&&(g=ye)}const oa=!0,za=Object.freeze(Object.defineProperty({__proto__:null,prerender:oa},Symbol.toStringTag,{value:"Module"})),$e="en";U("en",()=>H(()=>import("../chunks/ICEdU12j.js"),[],import.meta.url));U("fi",()=>H(()=>import("../chunks/CH3oJwPu.js"),[],import.meta.url));U("sv",()=>H(()=>import("../chunks/D2SZLOoF.js"),[],import.meta.url));U("sa",()=>H(()=>import("../chunks/DS1uFp8_.js"),[],import.meta.url));Se({fallbackLocale:$e,initialLocale:Be()||$e});async function ra(){try{const e=await fetch("https://peacemachine.eu/auth/app-token",{method:"POST",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error(`Error ${e.status}: ${await e.text()}`);const a=await e.json();return localStorage.setItem("accessToken",a.access_token),localStorage.setItem("refreshToken",a.refresh_token),a}catch(r){return console.error("Error getting auth token:",r),null}}function na(r,e){const a=re(e,["children","$$slots","$$events","$$legacy"]);ae(r,ne({name:"globe"},()=>a,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"}],["path",{d:"M2 12h20"}]],children:(i,t)=>{var s=W(),u=z(s);te(u,e,"default",{}),L(i,s)},$$slots:{default:!0}}))}function sa(r,e){const a=re(e,["children","$$slots","$$events","$$legacy"]);ae(r,ne({name:"volume-2"},()=>a,{iconNode:[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z"}],["path",{d:"M16 9a5 5 0 0 1 0 6"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728"}]],children:(i,t)=>{var s=W(),u=z(s);te(u,e,"default",{}),L(i,s)},$$slots:{default:!0}}))}function la(r,e){const a=re(e,["children","$$slots","$$events","$$legacy"]);ae(r,ne({name:"volume-x"},()=>a,{iconNode:[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15"}]],children:(i,t)=>{var s=W(),u=z(s);te(u,e,"default",{}),L(i,s)},$$slots:{default:!0}}))}var ia=(r,e)=>e.closeLangCard(),ca=(r,e,a)=>e(a()),da=x("<button> </button>"),ua=x('<div class="card-lang-container svelte-dj9995"><div class="card-header-container svelte-dj9995"><button class="btn btn-close svelte-dj9995"><!></button></div> <div class="card-btn-container svelte-dj9995"></div> <div class="card-extra-container svelte-dj9995"><div class="card-checkmark-container svelte-dj9995"><!></div> <div> </div></div></div>');function va(r,e){V(e,!0);const[a,g]=Z(),i=()=>R(ge,"$locale",a),t=()=>R(Te,"$_",a);let s=Ke(e,"translate",15);const u=[{code:"en",name:"English"},{code:"fi",name:"Suomi"},{code:"sv",name:"Svenska"},{code:"sa",name:"SÃ¡megiella"}];async function o(c){ge.set(c),localStorage.setItem("locale",c),await xe().then(()=>{e.closeLangCard(!1)})}var v=ua(),_=f(v),k=f(_);k.__click=[ia,e];var p=f(k);ze(p,{color:"#ffffff"}),d(k),d(_);var m=A(_,2);Qe(m,21,()=>u,Fe,(c,y)=>{let E=()=>l(y).code,Q=()=>l(y).name;var w=da();let se;w.__click=[ca,o,E];var Ae=f(w,!0);d(w),K(Ie=>{se=Je(w,1,"btn btn-lang svelte-dj9995",null,se,Ie),B(Ae,Q())},[()=>({"active-lang":i()===E()})]),L(c,w)}),d(m);var $=A(m,2),b=f($),S=f(b);We(S,{get checkValue(){return s()},set checkValue(c){s(c)}}),d(b);var h=A(b,2),n=f(h,!0);d(h),d($),d(v),K(c=>B(n,c),[()=>t()("btn_translate_check")]),L(r,v),G(),g()}D(["click"]);D(["click"]);var fa=x('<div class="loader-container svelte-1513a7f"><!></div>');function _a(r){var e=fa(),a=f(e);Ze(a,{color:"white",pulseSize:"80px",pulseTiming:"1.5s"}),d(e),L(r,e)}var pa=(r,e)=>e(),ma=x('<div class="audio-icon-container svelte-1hhaios"><button class="btn svelte-1hhaios"><!></button></div>');function ha(r,e){V(e,!0);const[a,g]=Z(),i=()=>R(me,"$audioStore",a);let t=I(0),s=I(-1),u=I("paused"),o=I(null);function v(){me.update(n=>{const c=!n.isGloballyMuted;return c?(l(o)&&l(o).pause(),Ve.stopAllEffects(),T(u,"paused")):l(u)==="paused"&&k(),{...n,isGloballyMuted:c}})}function _(){l(o)&&(l(o).pause(),T(o,null)),T(o,new Audio(Ge[l(t)].src),!0),l(o).volume=.3,l(o).loop=!0,l(o).play(),T(s,l(t),!0),N.setCurrentSong(l(o)),N.setVolume(.3)}function k(){l(u)==="playing"&&p(),T(u,"playing"),N.setPlayingState("playing"),_()}function p(){var n;T(u,"paused"),N.setPlayingState("paused"),(n=l(o))==null||n.pause()}pe(()=>{oe.url.pathname==="/explore"?T(t,1):T(t,0)}),pe(()=>{l(u)==="playing"&&l(t)!==l(s)&&_()});var m=ma(),$=f(m);$.__click=[pa,v];var b=f($);{var S=n=>{la(n,{color:"#ffffff"})},h=n=>{sa(n,{color:"#ffffff"})};ee(b,n=>{i().isGloballyMuted?n(S):n(h,!1)})}d($),d(m),L(r,m),G(),g()}D(["click"]);var ga=()=>ea("/"),$a=x('<div class="back-btn-container svelte-1sj945"><button class="btn svelte-1sj945"><!> </button></div>'),ba=(r,e)=>e.toggleLang(),ka=x('<div class="card-header-container svelte-1sj945"><!> <div class="lang-btn-container svelte-1sj945"><button class="btn svelte-1sj945"><!></button></div> <div class="audio-control-container svelte-1sj945"><!></div></div>');function ya(r,e){V(e,!0);const[a,g]=Z(),i=()=>R(Te,"$_",a);var t=ka(),s=f(t);{var u=m=>{var $=$a(),b=f($);b.__click=[ga];var S=f(b);He(S,{color:"#ffffff"});var h=A(S);d(b),d($),K(n=>B(h,` ${n??""}`),[()=>i()("btn_exit")]),j(3,$,()=>Ye),L(m,$)};ee(s,m=>{oe.url.pathname==="/explore"&&m(u)})}var o=A(s,2),v=f(o);v.__click=[ba,e];var _=f(v);na(_,{color:"#ffffff"}),d(v),d(o);var k=A(o,2),p=f(k);ha(p,{}),d(k),d(t),L(r,t),G(),g()}D(["click"]);var La=x('<link rel="icon" type="image/svg" href="/favicon.ico">'),Sa=x('<div class="lang-container svelte-eqtc25"><!></div>'),Ta=x('<div class="page-container"><!></div>'),xa=x('<!> <div class="header-container svelte-eqtc25"><!></div> <!>',1),Aa=x('<div class="app svelte-eqtc25"><!></div>');function Va(r,e){V(e,!0);let a=I(null),g=I(!1),i=500,t=I(!1);Re("questions",()=>l(a)),Se({fallbackLocale:"en",initialLocale:"en"});const s=()=>({API_ENDPOINT:"/get_questions",API_METHOD:"POST",REQUEST_BODY:{question_type:"starter"}});async function u(){await ra().then(()=>{o()}).catch(p=>{throw he(500,"Failed to get token")})}async function o(){await Xe(s()).then(p=>{T(a,p,!0)}).catch(p=>{throw he(500,"Failed to get questions")})}let v=()=>{T(g,!l(g))};De(()=>{window.scrollTo(0,0),u()});var _=Aa();Ee(p=>{var m=La();L(p,m)});var k=f(_);aa(k,xe,p=>{_a(p)},p=>{var m=xa(),$=z(m);{var b=c=>{var y=Sa(),E=f(y);va(E,{closeLangCard:v,get translate(){return l(t)},set translate(Q){T(t,Q,!0)}}),d(y),j(1,y,()=>O,()=>({duration:i})),j(2,y,()=>O,()=>({duration:i})),L(c,y)};ee($,c=>{l(g)&&c(b)})}var S=A($,2),h=f(S);ya(h,{toggleLang:v}),d(S);var n=A(S,2);ta(n,()=>oe.url.pathname,c=>{var y=Ta(),E=f(y);Ue(E,()=>e.children),d(y),j(1,y,()=>O,()=>({duration:i})),j(2,y,()=>O,()=>({duration:i})),L(c,y)}),L(p,m)}),d(_),L(r,_),G()}export{Va as component,za as universal};
